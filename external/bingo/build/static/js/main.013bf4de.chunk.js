(this.webpackJsonpbingo=this.webpackJsonpbingo||[]).push([[0],{133:function(e,t,a){},134:function(e,t,a){},136:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),l=a(33),r=a.n(l),i=(a(43),a(138)),o=a(139),c=a(11),d=a.n(c),m=a(16),h=a.n(m),u=a(34),E=a.n(u);class b extends n.Component{renderSuccess(){return this.props.gotBingo?s.a.createElement("span",{className:"ma2 f1-ns f2-m f3",style:{textAlign:"center"}},s.a.createElement("img",{alt:"nf-core/bingo logo",width:"50%",src:"assets/img/nfcore-bingo_logo.png"}),"You got bingo! \ud83c\udf89"):null}render(){return s.a.createElement("header",{className:"flex justify-between items-end bb-5 pv-1"},s.a.createElement("h1",{className:this.props.gotBingo?"visually-hidden":"ma2 f1-ns f2-m f3"},s.a.createElement("img",{alt:"nf-core/bingo logo",width:"50%",src:"assets/img/nfcore-bingo_logo.png"})),this.renderSuccess(),this.props.children)}}var p=b;h()(d.a);class g extends n.Component{constructor(e){super(e);const t=e.size%2?e.size:e.size-1,a=t*t,n=(t*t-1)/2;let s=e.values.slice(),l=0;for(;s.length<a;)s.push(e.values[l]),l++,l>e.values.length-1&&(l=0);this.state={activeCell:0,activeRow:0,activeCol:0,endTime:0,grid:this.generateRandomGrid(s,t),midpoint:n,selection:{[n]:!0},size:t,startTime:Date.now(),values:s},this.handleKeyDown=this.handleKeyDown.bind(this),this.refreshBoard=this.refreshBoard.bind(this),this.updateLeaderBoard=this.updateLeaderBoard.bind(this)}generateRandomGrid(e,t){const a=function(e){for(let a=e.length-1;a>0;a--){const n=Math.floor(Math.random()*(a+1));var t=[e[n],e[a]];e[a]=t[0],e[n]=t[1]}return e}(e);let n=[];for(let s=0;s<t;s++){n[s]=[];for(let e=0;e<t;e++){let l=e+s*t;n[s][e]={value:a[l],id:l}}}return n}updateLeaderBoard(){const e=document.getElementById("name").value;if(e&&""!==e){const t={name:e,timestamp:this.state.endTime,duration:this.state.endTime-this.state.startTime},a=this.props.db.database().ref("games/"+this.props.gameId).child("leaderboard").push(t).key;return this.setState({leaderboardSubmitted:!0}),a}}refreshBoard(){this.setState({activeCell:0,activeRow:0,activeCol:0,bingo:!1,grid:this.generateRandomGrid(this.state.values,this.state.size),leaderboardSubmitted:!1,selection:{[this.state.midpoint]:!0},startTime:Date.now(),endTime:0})}componentDidUpdate(e,t){t.startTime===this.state.startTime&&(t.activeCell!==this.state.activeCell&&document.getElementById(this.props.id+"-cell-"+this.state.activeCell).focus(),t.selection!==this.state.selection&&(console.clear(),console.log("Checking for bingo..."),this.checkRow(this.state.activeRow)||this.checkCol(this.state.activeCol)||this.checkDiagonalA(this.state.activeRow,this.state.activeCol)||this.checkDiagonalB(this.state.activeRow,this.state.activeCol)?this.state.bingo||(console.log("It's a bingo!"),this.setState({bingo:!0,endTime:Date.now()})):(console.log("Alas, not a bingo."),this.setState({bingo:!1}))))}checkIndices(e){for(let t=0;t<e.length;t++){let a=e[t];if(!this.state.selection[a])return!1}return!0}checkRow(e){const t=this.state.size,a=e*t;for(let n=a;n<a+t;n++)if(!this.state.selection[n])return console.log("- Bingo in row "+e+"? Fail at cell "+n),!1;return console.log("- Bingo in row "+e+"? Success!"),!0}checkCol(e){const t=this.state.size;for(let a=e;a<t*t;a+=t)if(!this.state.selection[a])return console.log("- Bingo in col "+e+"? Fail at cell "+a),!1;return console.log("- Bingo in col "+e+"? Success!"),!0}checkDiagonalA(e,t){const a=this.state.size;if(e===t){for(let e=0;e<a;e++)if(!this.state.selection[a*e+e])return console.log("- Bingo in diagonal A? Fail at cell "+(a*e+e)),!1;return console.log("- Bingo in diagonal A? Success!"),!0}}checkDiagonalB(e,t){const a=this.state.size;if(e===a-t-1){for(let e=0;e<a;e++)if(!this.state.selection[a*e+a-e-1])return console.log("- Bingo in diagonal B? Fail at cell "+(a*e+a-e-1)),!1;return console.log("- Bingo in diagonal B? Success!"),!0}}handleKeyDown(e,t,a){switch(e.key){case"Down":case"ArrowDown":t<this.state.size-1&&this.setActiveCell(t+1,a),e.preventDefault();break;case"Up":case"ArrowUp":t>0&&this.setActiveCell(t-1,a),e.preventDefault();break;case"Left":case"ArrowLeft":a>0&&this.setActiveCell(t,a-1),e.preventDefault();break;case"Right":case"ArrowRight":a<this.state.size-1&&this.setActiveCell(t,a+1),e.preventDefault()}}setActiveCell(e,t){this.setState({activeCell:this.state.grid[e][t].id})}renderMidpointCell(e,t,a){return s.a.createElement("td",{role:"gridcell",key:e},s.a.createElement("div",{className:"cell-contents"},s.a.createElement("button",{"aria-disabled":!0,"aria-pressed":!0,className:"cell-toggle",id:this.props.id+"-cell-"+e,onClick:()=>{this.setState({activeCell:e})},onKeyDown:e=>{this.handleKeyDown(e,t,a)},tabIndex:e===this.state.activeCell?"0":"-1"},s.a.createElement("svg",{role:"img","aria-labelledby":"star-title",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},s.a.createElement("title",{id:"star-title"},"Star (free tile)"),s.a.createElement("path",{d:"M12.6 1.4l2.2 7c.1.2.3.4.6.4h6.9c.7 0 1 .9.5 1.3l-5.7 4.2c-.2.1-.3.5-.2.7l2.7 7.2c.2.6-.5 1.2-1.1.7l-6-4.5c-.3-.2-.6-.2-.9 0l-6.1 4.5c-.5.5-1.3-.1-1-.7L7.1 15c.1-.2 0-.6-.3-.7l-5.6-4.2c-.6-.4-.2-1.3.4-1.3h6.9c.4 0 .6-.1.7-.4l2.2-7c.1-.7 1.1-.6 1.2 0z"})))))}renderCell(e,t,a){const n=e.id===this.state.midpoint,l=!(!this.state.selection[e.id]&&!n);return n?this.renderMidpointCell(e.id,t,a):s.a.createElement("td",{role:"gridcell",key:e.id},s.a.createElement("div",{className:"cell-contents"},s.a.createElement("button",{"aria-pressed":l,className:"cell-toggle",id:this.props.id+"-cell-"+e.id,onClick:()=>{let n=(s=this.state.selection,Object.assign({},s));var s;n[e.id]=!l,this.setState({selection:n,activeCell:e.id,activeRow:t,activeCol:a})},onKeyDown:e=>{this.handleKeyDown(e,t,a)},tabIndex:e.id===this.state.activeCell?"0":"-1"},e.value)))}renderRow(e,t){return s.a.createElement("tr",{role:"row",key:t},e.map((e,a)=>this.renderCell(e,t,a)))}renderLeaderboardPrompt(){return this.state.bingo?this.state.leaderboardSubmitted?s.a.createElement("p",{className:"lh-copy mb0"},"You're on the leaderboard!"," ","Keep playing on this bingo board or"," ",s.a.createElement("button",{onClick:this.refreshBoard},"generate a new one"),"."):s.a.createElement("div",{className:"pt3"},s.a.createElement("label",{htmlFor:"name"},"Enter a name to display on the leaderboard:"),s.a.createElement("div",{className:"pv2"},s.a.createElement("input",{style:{backgroundColor:"#f6f7fa"},className:"input-reset pa3 mb2 ba bw1 b--black",id:"name",placeholder:"Your Name"}),s.a.createElement("button",{className:"tc fw8 blue-button white pa3 ml2 ba bw1 b--black",onClick:this.updateLeaderBoard},"Add me!"))):null}renderSuccess(){return this.state.bingo?s.a.createElement("div",{className:"success maxw-95 pa3 mv3"},s.a.createElement("div",{className:"flex flex-wrap items-center justify-between"},s.a.createElement("div",{className:"w-50-l w-100 tc tl-l",role:"alert","aria-live":"assertive"},s.a.createElement("span",{className:"f2 fw8"},"You got bingo! ",s.a.createElement("span",{role:"img","aria-label":"Hurray!"},"\ud83c\udf89")),s.a.createElement("div",{className:"f3 pt2"},"Total time: ",d.a.duration(this.state.endTime-this.state.startTime).format("h [hr], m [min], s [sec]"))),s.a.createElement("div",{className:"w-50-l w-100 tc tr-l"},this.renderLeaderboardPrompt()))):null}render(){return s.a.createElement("div",null,s.a.createElement(p,{gotBingo:this.state.bingo},s.a.createElement("button",{className:"tc fw8 bg-white black pa3 ba bw1 b--black mb2",onClick:this.refreshBoard},"New Board")),s.a.createElement("main",null,s.a.createElement("p",{style:{fontSize:"12px"}},"\ud83d\udec8 See leaderboard and Instructions below the board."),s.a.createElement("table",{role:"grid",className:"maxw-95"},s.a.createElement("tbody",{role:"rowgroup"},this.state.grid.map((e,t)=>this.renderRow(e,t)))),this.renderSuccess()),s.a.createElement(E.a,{parent:this,prefix:"bingo-".concat(this.props.gameId),blacklist:["activeCell","activeRow","activeCol","values"]}))}}g.defaultProps={size:5,values:"abcdefghijklmnopqrstuv".split("")};var f=g,v=a(35),w=a.n(v);class S extends n.Component{renderDefault(){return s.a.createElement("div",null,s.a.createElement("h3",null,"The Basics"),s.a.createElement("ul",null,s.a.createElement("li",null,"Type in the board name as: nf-core-hackathon"),s.a.createElement("li",null,"Press tiles as phrases come up."),s.a.createElement("li",null,"Your game timer begins as soon as you start a new board."),s.a.createElement("li",null,"\ud83c\udf89 ",s.a.createElement("strong",null,"5 in a row is bingo!")),s.a.createElement("li",null,"Shout 'BINGO!' on Slack, and/or announce on Twitter tagging @nf_core, with a screenshot!"),s.a.createElement("li",null,"Your board will persist over browser sessions, press 'New Board' to restart.")),s.a.createElement("blockquote",null,"\ud83d\udec8 Get more information about nf-core on our ",s.a.createElement("a",{href:"https://nf-co.re"},"website!")),s.a.createElement("footer",null,s.a.createElement("p",{style:{fontSize:10,width:"100%",fontStyle:"italic",bottom:0,display:"flex",justifyContent:"center",alignItems:"center"}},"This page was modified after ",s.a.createElement("a",{href:"https://backlog-bingo.com/"},"Backlog-Bingo"),".  ",s.a.createElement("a",{href:"https://github.com/corhttps://github.com/cordeliadillon/bingo/deliadillon/bingo/"},"Code")," originally written by ",s.a.createElement("a",{href:"https://www.cordeliadillon.com/"},"Cordelia Dillon"))))}render(){return s.a.createElement("aside",{className:"maxw-95 instructions","aria-label":"Instructions"},s.a.createElement("h2",{className:"pv2 bb-3"},"Instructions"),this.props.src?s.a.createElement(w.a,{source:this.props.src}):this.renderDefault())}}var A=S;h()(d.a);class C extends n.Component{renderEmptyState(){return this.props.leaders&&this.props.leaders.length?null:s.a.createElement("div",null,s.a.createElement("p",null,"There's no one on the leaderboard yet!"),s.a.createElement("p",null,"Get ",this.props.size," phrases in a row to add yourself to the list with: <name surname> (@<github handle>)."))}render(){return s.a.createElement("aside",{className:"maxw-95","aria-label":"Leaderboard"},s.a.createElement("h2",{className:"bb-3 pv2"},"Leaderboard"),s.a.createElement("div",{role:"log","aria-live":"polite","aria-atomic":"true"},s.a.createElement("ol",{className:"f4 list pa0"},this.props.leaders.map((e,t)=>s.a.createElement("li",{key:t,className:"ph1 pb3"},s.a.createElement("span",{"aria-hidden":"true"},"\ud83c\udfc6 "),s.a.createElement("strong",null,e.name," ","\xb7"," ",d.a.duration(e.duration).format("h [hr], m [min], s [sec]")," ","\xb7"," "),d()(e.timestamp).format("L LT")))),this.renderEmptyState()))}}var _=C;a(126);class B extends n.Component{constructor(e){super(e),this.handleSubmit=this.handleSubmit.bind(this)}handleSubmit(e){const t=document.getElementById("boardName").value;t&&(window.location.search="game=".concat(t)),e.preventDefault()}render(){return s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("h2",null,"Ready to join a game?"),s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"boardName",className:"f6 b db mb2"},"Board Name"),s.a.createElement("input",{style:{backgroundColor:"#f6f7fa"},className:"input-reset pa3 mr2 ba bw1 b--black",id:"boardName",placeholder:"Enter your board name"}),s.a.createElement("input",{className:"tc fw8 blue-button white pa3 ba bw1 b--black",value:"Play!",type:"submit"})))}}var y=B,I=a(24);a(128);const R={apiKey:"AIzaSyCPzdzl39XmpvCrIXho4pyY1D_MlZVAnsA",authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_FIREBASE_API_KEY:"AIzaSyCPzdzl39XmpvCrIXho4pyY1D_MlZVAnsA",REACT_APP_FIREBASE_DATABASE_URL:"https://nfcore-bingo-default-rtdb.firebaseio.com/",REACT_APP_FIREBASE_PROJECT_ID:"nfcore-bingo",REACT_APP_FIREBASE_STORAGE_BUCKET:"nam5",REACT_APP_FIREBASE_MESSAGEING_SENDER_ID:"948053401155"}).REACT_APP_FIREBASE_AUTH_DOMAIN,databaseURL:"https://nfcore-bingo-default-rtdb.firebaseio.com/",projectId:"nfcore-bingo",storageBucket:"nam5",messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_FIREBASE_API_KEY:"AIzaSyCPzdzl39XmpvCrIXho4pyY1D_MlZVAnsA",REACT_APP_FIREBASE_DATABASE_URL:"https://nfcore-bingo-default-rtdb.firebaseio.com/",REACT_APP_FIREBASE_PROJECT_ID:"nfcore-bingo",REACT_APP_FIREBASE_STORAGE_BUCKET:"nam5",REACT_APP_FIREBASE_MESSAGEING_SENDER_ID:"948053401155"}).REACT_APP_FIREBASE_MESSAGING_SENDER_ID};I.a.initializeApp(R);var T=I.a,N=a(36),D=a.n(N);a(133),a(134);class k extends n.Component{constructor(e){super(e),this.state={gameId:D.a.parse(e.location.search).game,noSuchGame:!1,signedIn:!1},T.database().ref("games/"+this.state.gameId).once("value").then(e=>{this.setState({noSuchGame:!e.exists(),lexicon:e.child("lexicon").val(),size:e.child("size").val()});let t=e.child("instructions").val();t&&this.setState({instructions:t.replace(/\\n/g,"\n")})}),T.database().ref("games/"+this.state.gameId+"/leaderboard").orderByChild("duration").on("value",e=>{const t=e.val()?Object.values(e.val()).sort((e,t)=>e.duration-t.duration):[];this.setState({leaders:t})})}renderGame(){return s.a.createElement("div",null,s.a.createElement(f,{id:"abc",size:this.state.size,values:this.state.lexicon,db:T,gameId:this.state.gameId}),s.a.createElement(_,{leaders:this.state.leaders,size:this.state.size}),s.a.createElement(A,{src:this.state.instructions}))}renderLoadingScreen(){return s.a.createElement("div",null,s.a.createElement(p,null),s.a.createElement("main",null,s.a.createElement("div",{className:"f3 pa2","aria-live":"polite"},"Loading...")))}renderWelcomeScreen(){return s.a.createElement("div",null,s.a.createElement(p,null),s.a.createElement("main",null,s.a.createElement(y,{firebase:T})),s.a.createElement(A,null))}render(){return this.state.gameId&&!this.state.noSuchGame?this.state.lexicon&&this.state.size?this.renderGame():this.renderLoadingScreen():this.renderWelcomeScreen()}}var P=()=>s.a.createElement(i.a,null,s.a.createElement(o.a,{path:"/",exact:!0,component:k}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})},38:function(e,t,a){e.exports=a(136)},43:function(e,t,a){}},[[38,1,2]]]);
//# sourceMappingURL=main.013bf4de.chunk.js.map